(this["webpackJsonpreact-punto-de-venta"]=this["webpackJsonpreact-punto-de-venta"]||[]).push([[0],{181:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},363:function(e,t,a){"use strict";a.r(t);var c=a(3),s=a(35),n=a.n(s),r=a(14),i=a(19),o=(a(181),a(182),a(183),a(184),a(12)),l=a.n(o),d=a(17),j=a(8),b=a(16),u=a(10),m=Object(c.createContext)(),h=a(372),O=a(20),x=a.n(O),p="https://punto-de-venta-codigo-backend.herokuapp.com/",f=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("".concat(p,"/pedido"),JSON.stringify(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("".concat(p,"/pedido"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("".concat(p,"/mercadopago"),JSON.stringify(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=Object(c.createContext)(),_=a(1),C=Object(i.g)((function(e){var t=Object(c.useState)(null),a=Object(u.a)(t,2),s=a[0],n=a[1],r=Object(c.useState)(null),i=Object(u.a)(r,2),o=i[0],O=i[1],x=Object(c.useState)([]),p=Object(u.a)(x,2),v=p[0],C=p[1],y=Object(c.useContext)(g).usu_id,w=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,c,r,i,o,d,u,m,O,x,p=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>1&&void 0!==p[1]?p[1]:{},c=new Date,r=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate()+" "+c.getHours()+":"+c.getMinutes()+":"+c.getSeconds(),i=v.find((function(e){return s.mesa_id===e.mesa_id})),o=i.platos.map((function(e){return{plato_id:e.plato_id,pedidoplato_cant:e.plato_cant}})),d={pedido_fech:r,pedido_nro:Object(h.a)(),pedido_est:"pagado",usu_id:y,mesa_id:s.mesa_id,pedidoplatos:o},console.log(d),e.next=9,f(d);case 9:if(u=e.sent,console.log(u),!u.data.ok){e.next=22;break}if("efectivo"!==t){e.next=19;break}return m=v.filter((function(e){return e.mesa_id!==s.mesa_id})),C(Object(b.a)(m)),n(null),e.abrupt("return",!0);case 19:O=u.data.content.pedido_id,x={pedido_id:O,comprador:{name:a.name,surname:a.surname,email:"test_user_46542185@testuser.com",phone:{area_code:"54",number:+a.telefono},identification:{type:"DNI",number:a.dni},address:{zip_code:"04000",street_name:a.direccion,street_number:100}}},N(Object(j.a)({},x)).then((function(e){e.data.ok&&(document.location=e.data.content)}));case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)(m.Provider,{value:{pagarContext:w,objMesaGlobal:s,objCategoriaGlobal:o,pedidos:v,setObjMesaGlobal:n,setObjCategoriaGlobal:O,modificarPlatoContext:function(e,t){var a=Object(b.a)(v);if(s){var c=a.find((function(e){return s.mesa_id===e.mesa_id}));if(c){var n=c.platos.findIndex((function(t){return t.plato_id===e.plato_id}));n>=0?"sumar"===t?(c.platos[n].plato_cant++,C(a)):c.platos[n].plato_cant>1?(c.platos[n].plato_cant--,C(a)):(c.platos.splice(n,1),0===c.platos.length&&(a=a.filter((function(e){return e.mesa_id!==s.mesa_id}))),C(a)):"sumar"===t&&(c.platos.push(Object(j.a)(Object(j.a)({},e),{},{plato_cant:1})),C(a))}else"sumar"===t&&(a.push({usu_id:0,mesa_id:s.mesa_id,pedido_est:"pendiente",platos:[Object(j.a)(Object(j.a)({},e),{},{plato_cant:1})]}),C(a))}}},children:e.children})})),y=a(40),w=a.n(y),S=function(){var e=Object(c.useContext)(g),t=e.usu_nom,a=e.cerrarSesion;return Object(_.jsxs)("header",{className:"header",children:[Object(_.jsx)("div",{className:"header__logo",children:Object(_.jsx)("img",{src:"/imagenes/logo.svg",alt:""})}),Object(_.jsxs)("div",{className:"header__buscador",children:[Object(_.jsx)("img",{src:"/imagenes/search.svg",alt:""}),Object(_.jsx)("input",{type:"text",className:"header__input",placeholder:"Busca un t\xe9rmino"})]}),Object(_.jsxs)("div",{className:"header__usuario",children:[Object(_.jsx)("img",{src:"https://randomuser.me/api/portraits/men/90.jpg",alt:""}),Object(_.jsx)("span",{children:t}),Object(_.jsx)("button",{className:"btn btn-danger",onClick:function(){a()},children:"Cerrar Sesi\xf3n"})]})]})},k=a(15),M=a(369),F=a(168),P=a.n(F),E=function(e){var t=e.mostrar,a=e.setMostrar,s=Object(c.useContext)(m),n=s.pedidos,r=s.objMesaGlobal,i=s.pagarContext,o=Object(c.useState)({name:"s/n",surname:"s/a",email:"nomail@mail.com",telefono:0,dni:"11111111",direccion:"s/d"}),l=Object(u.a)(o,2),d=l[0],b=l[1],O=n.find((function(e){return e.mesa_id===(null===r||void 0===r?void 0:r.mesa_id)})),x=0;O&&(x=O.platos.reduce((function(e,t){return e+ +t.plato_pre*t.plato_cant}),0).toFixed(2));var p=Object(h.a)(),f=Object(c.useRef)(),v=function(e){b(Object(j.a)(Object(j.a)({},d),{},Object(k.a)({},e.target.name,e.target.value)))};return O?Object(_.jsxs)(M.a,{show:t,onHide:function(){a(!1)},size:"xl",children:[Object(_.jsx)(M.a.Header,{closeButton:!0,children:Object(_.jsx)(M.a.Title,{children:"Boleta"})}),Object(_.jsx)(M.a.Body,{children:Object(_.jsx)("div",{className:"container",ref:f,children:Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsxs)("div",{className:"invoice",children:[Object(_.jsx)("div",{className:"invoice-company text-inverse f-w-600",children:Object(_.jsxs)("h4",{className:"display-4",children:["Codi",Object(_.jsx)("span",{className:"text-danger",children:"Go"})]})}),Object(_.jsxs)("div",{className:"invoice-header",children:[Object(_.jsxs)("div",{className:"invoice-from",children:[Object(_.jsx)("small",{children:"to"}),Object(_.jsxs)("address",{className:"m-t-5 m-b-5",children:[Object(_.jsx)("strong",{className:"text-inverse",children:"Company Name"}),Object(_.jsx)("br",{}),"Street Address",Object(_.jsx)("br",{}),"City, Zip Code",Object(_.jsx)("br",{}),"Phone: (123) 456-7890",Object(_.jsx)("br",{}),"Fax: (123) 456-7890"]})]}),Object(_.jsxs)("div",{className:"invoice-to",children:[Object(_.jsx)("small",{children:"to"}),Object(_.jsxs)("address",{className:"m-t-5 m-b-5",children:[Object(_.jsx)("strong",{className:"text-inverse",children:"Company Name"}),Object(_.jsx)("br",{}),"Street Address",Object(_.jsx)("br",{}),"City, Zip Code",Object(_.jsx)("br",{}),"Phone: (123) 456-7890",Object(_.jsx)("br",{}),"Fax: (123) 456-7890"]})]}),Object(_.jsxs)("div",{className:"invoice-date",children:[Object(_.jsx)("small",{children:"Fecha"}),Object(_.jsx)("div",{className:"date text-inverse m-t-5",children:"Abril, 28, 21'"}),Object(_.jsxs)("div",{className:"invoice-detail",children:[p,Object(_.jsx)("br",{}),"Boleta Electr\xf3nica"]})]}),Object(_.jsxs)("form",{className:"row",children:[Object(_.jsxs)("div",{className:"form-group col-md-2",children:[Object(_.jsx)("label",{htmlFor:"",children:"Nombre:"}),Object(_.jsx)("input",{type:"text",className:"form-control form-control-sm",name:"name",value:d.name,onChange:v})]}),Object(_.jsxs)("div",{className:"form-group col-md-2",children:[Object(_.jsx)("label",{htmlFor:"",children:"Apellido:"}),Object(_.jsx)("input",{type:"text",className:"form-control form-control-sm",name:"surname",value:d.surname,onChange:v})]}),Object(_.jsxs)("div",{className:"form-group col-md-2",children:[Object(_.jsx)("label",{htmlFor:"",children:"Email:"}),Object(_.jsx)("input",{type:"email",className:"form-control form-control-sm",name:"email",value:d.email,onChange:v})]}),Object(_.jsxs)("div",{className:"form-group col-md-1",children:[Object(_.jsx)("label",{htmlFor:"",children:"Tel\xe9fono:"}),Object(_.jsx)("input",{type:"number",maxLength:"7",className:"form-control form-control-sm",name:"telefono",value:d.telefono,onChange:v})]}),Object(_.jsxs)("div",{className:"form-group col-md-2",children:[Object(_.jsx)("label",{htmlFor:"",children:"Dni:"}),Object(_.jsx)("input",{type:"text",className:"form-control form-control-sm",name:"dni",value:d.dni,onChange:v})]}),Object(_.jsxs)("div",{className:"form-group col-md-3",children:[Object(_.jsx)("label",{htmlFor:"",children:"Direcci\xf3n:"}),Object(_.jsx)("input",{type:"text",className:"form-control form-control-sm",name:"direccion",value:d.direccion,onChange:v})]})]})]}),Object(_.jsxs)("div",{className:"invoice-content",children:[Object(_.jsx)("div",{className:"table-responsive",children:Object(_.jsxs)("table",{className:"table table-invoice",children:[Object(_.jsx)("thead",{children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{children:"#"}),Object(_.jsx)("th",{children:"Cant."}),Object(_.jsx)("th",{children:"Descripci\xf3n"}),Object(_.jsx)("th",{children:"P.Unitario"}),Object(_.jsx)("th",{children:"P.Total"})]})}),Object(_.jsx)("tbody",{children:O.platos.map((function(e,t){return Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{children:t+1}),Object(_.jsx)("td",{children:e.plato_cant}),Object(_.jsx)("td",{children:e.plato_nom}),Object(_.jsxs)("td",{children:["S/ ",e.plato_pre]}),Object(_.jsxs)("td",{children:["S/ ",+e.plato_pre*+e.plato_cant]})]},e.plato_id)}))})]})}),Object(_.jsxs)("div",{className:"invoice-price",children:[Object(_.jsx)("div",{className:"invoice-price-left",children:Object(_.jsxs)("div",{className:"invoice-price-row",children:[Object(_.jsxs)("div",{className:"sub-price",children:[Object(_.jsx)("small",{children:"SUBTOTAL"}),Object(_.jsxs)("span",{className:"text-inverse",children:["S/ ",(.82*x).toFixed(2)]})]}),Object(_.jsx)("div",{className:"sub-price",children:Object(_.jsx)("i",{className:"fa fa-plus text-muted"})}),Object(_.jsxs)("div",{className:"sub-price",children:[Object(_.jsx)("small",{children:"IGV (18%)"}),Object(_.jsxs)("span",{className:"text-inverse",children:["S/ ",(.18*x).toFixed(2)]})]})]})}),Object(_.jsxs)("div",{className:"invoice-price-right",children:[Object(_.jsx)("small",{children:"TOTAL"})," ",Object(_.jsxs)("span",{className:"f-w-600",children:["S/ ",x]})]})]})]}),Object(_.jsxs)("div",{className:"invoice-note",children:["* La boleta ser\xe1 enviada a su correo electr\xf3nico",Object(_.jsx)("br",{}),"* Revise su vuelto antes de retirarse de nuestras instalaciones",Object(_.jsx)("br",{}),"* Si tiene alguna consulta, env\xede un correo a jorgegarba@gmail.com"]}),Object(_.jsxs)("div",{className:"invoice-footer",children:[Object(_.jsx)("p",{className:"text-center m-b-5 f-w-600",children:"Gracias por su compra"}),Object(_.jsxs)("p",{className:"text-center",children:[Object(_.jsxs)("span",{className:"m-r-10",children:[Object(_.jsx)("i",{className:"fa fa-fw fa-lg fa-globe"})," CodiGo"]}),Object(_.jsxs)("span",{className:"m-r-10",children:[Object(_.jsx)("i",{className:"fa fa-fw fa-lg fa-phone-volume"})," 978541232"]}),Object(_.jsxs)("span",{className:"m-r-10",children:[Object(_.jsx)("i",{className:"fa fa-fw fa-lg fa-envelope"})," jorgegarba@gmail.com"]})]})]})]})})})}),Object(_.jsxs)(M.a.Footer,{children:[Object(_.jsx)("button",{className:"btn btn-success btn-lg",onClick:function(){i("efectivo").then((function(e){e&&a(!1)}))},children:"PAGO EFECTIVO"}),Object(_.jsx)("button",{className:"btn btn-info btn-lg",onClick:function(){i("visa",d).then((function(e){e&&a(!1)}))},children:Object(_.jsx)("i",{className:"fab fa-cc-visa "})}),Object(_.jsx)(P.a,{trigger:function(){return Object(_.jsx)("button",{className:"btn btn-primary btn-lg",children:Object(_.jsx)("i",{className:"fas fa-print    "})})},content:function(){return f.current}})]})]}):null},I=function(e){var t=e.objItem;return Object(_.jsxs)("li",{className:"comanda__item",children:[Object(_.jsxs)("p",{className:"comanda__nombre",children:[Object(_.jsx)("span",{children:Object(_.jsx)("strong",{children:t.plato_nom})}),Object(_.jsxs)("span",{children:["Precio: S/ ",t.plato_pre]})]}),Object(_.jsx)("p",{className:"comanda__cantidad",children:t.plato_cant}),Object(_.jsx)("p",{className:"comanda__precio",children:Object(_.jsxs)("strong",{children:["S/ ",t.plato_cant*+t.plato_pre]})})]})},G=function(){var e=Object(c.useContext)(m),t=e.pedidos,a=e.objMesaGlobal,s=Object(c.useState)(!1),n=Object(u.a)(s,2),r=n[0],i=n[1],o=[];if(a){var l=t.find((function(e){return e.mesa_id===a.mesa_id}));l&&(o=l.platos)}return Object(_.jsxs)("div",{className:"boleta",children:[Object(_.jsxs)("h3",{children:["Pedido Mesa: \xa0",Object(_.jsx)("span",{className:"color-secundario",children:a?a.mesa_nro:"Seleccione"})]}),Object(_.jsx)("hr",{}),Object(_.jsxs)("div",{className:"comanda",children:[Object(_.jsx)("h4",{className:"comanda__mesa",children:a?"Mesa "+a.mesa_nro:"Seleccione"}),Object(_.jsx)("p",{className:"comanda__usuario",children:"Carlos Jimenez"}),Object(_.jsx)("hr",{}),Object(_.jsx)("ul",{className:"comanda__lista",children:o.map((function(e){return Object(_.jsx)(I,{objItem:e},e.plato_id)}))}),Object(_.jsx)("button",{className:"boton boton-success boton-block",onClick:function(){i(!0)},children:"PAGAR"})]}),Object(_.jsx)(E,{mostrar:r,setMostrar:i})]})},A=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("".concat(p,"/categoria"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("".concat(p,"/categoria/").concat(t,"/platos"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){var t=e.objCategoria,a=Object(c.useContext)(m),s=a.objCategoriaGlobal,n=a.setObjCategoriaGlobal;return Object(_.jsxs)("li",{className:t.categoria_id===(null===s||void 0===s?void 0:s.categoria_id)?"active":"",onClick:function(){n(Object(j.a)({},t))},children:[Object(_.jsx)("img",{src:"/imagenes/plato_blanco.svg",alt:""}),Object(_.jsx)("span",{children:t.categoria_nom})]})},R=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1];return Object(c.useEffect)((function(){A().then((function(e){e.data.ok&&s(e.data.content)}))}),[]),Object(_.jsx)("nav",{className:"menu",children:Object(_.jsx)("ul",{className:"menu__lista",children:a.map((function(e){return Object(_.jsx)(D,{objCategoria:e},e.categoria_id)}))})})},T=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("".concat(p,"/mesa"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.put("".concat(p,"/mesa/").concat(t.mesa_id),JSON.stringify(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.a.post("".concat(p,"/mesa"),JSON.stringify(t),{headers:{"Content-type":"application/json"}}),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.delete("".concat(p,"/mesa/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t=e.objMesa,a=Object(c.useContext)(m),s=a.objMesaGlobal,n=a.setObjMesaGlobal;return Object(_.jsxs)("li",{className:"mesas__mesa ".concat((null===s||void 0===s?void 0:s.mesa_id)===t.mesa_id?"activo":""),onClick:function(){n(Object(j.a)({},t))},children:[Object(_.jsx)("span",{className:"mesas__titulo",children:"Mesa"}),Object(_.jsx)("span",{className:"mesas__numero",children:t.mesa_nro})]})},z=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1];return Object(c.useEffect)((function(){T().then((function(e){e.data.ok&&s(e.data.content)}))}),[]),Object(_.jsxs)("div",{className:"mesas",children:[Object(_.jsx)("ul",{className:"mesas__lista",children:a.map((function(e){return Object(_.jsx)(U,{objMesa:e},e.mesa_id)}))}),Object(_.jsx)("div",{className:"mesas__info"})]})},V=function(e){var t=e.objPlato,a=Object(c.useContext)(m).modificarPlatoContext;return Object(_.jsxs)("div",{className:"carta__plato",children:[Object(_.jsx)("img",{src:t.plato_img,alt:""}),Object(_.jsx)("h4",{className:"carta__titulo",children:t.plato_nom}),Object(_.jsxs)("span",{className:"carta__precio",children:["S/ ",(+t.plato_pre).toFixed(2)]}),Object(_.jsxs)("div",{className:"carta__botones",children:[Object(_.jsx)("button",{className:"boton boton-outline-primary boton-restar",onClick:function(){a(Object(j.a)({},t),"restar")},children:"-1"}),Object(_.jsx)("button",{className:"boton boton-outline-primary boton-sumar",onClick:function(){a(Object(j.a)({},t),"sumar")},children:"+1"})]})]})},W=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1],n=Object(c.useContext)(m).objCategoriaGlobal;return Object(c.useEffect)((function(){n&&H(n.categoria_id).then((function(e){e.data.ok&&s(e.data.content.Platos)}))}),[n]),Object(_.jsxs)("div",{className:"carta",children:[Object(_.jsxs)("h3",{children:["Lista de Platos Categoria: \xa0",Object(_.jsx)("span",{className:"color-secundario",children:n?n.categoria_nom:"Seleccione una categor\xeda"})]}),Object(_.jsx)("div",{className:"carta__platos",children:a.map((function(e){return Object(_.jsx)(V,{objPlato:e},e.plato_id)}))})]})},Z=Object(i.g)((function(e){var t=window.location.hash.split("?")[1],a=new URLSearchParams(t);return"success"===a.get("payment_info")?w.a.fire({icon:"success",title:"Hecho!",text:"El pago se ha realizado correctamente",timer:3e3,allowOutsideClick:!1,showConfirmButton:!1}).then((function(){e.history.replace("/pos/terminal")})):"failed"===a.get("payment_info")&&w.a.fire({icon:"error",title:"Ups!",text:"Hubo un error al procesar el pago",timer:3e3,allowOutsideClick:!1,showConfirmButton:!1}).then((function(){e.history.replace("/pos/terminal")})),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(S,{}),Object(_.jsxs)("main",{className:"pos-container",children:[Object(_.jsx)(R,{}),Object(_.jsxs)("section",{className:"tabla",children:[Object(_.jsx)(z,{}),Object(_.jsxs)("div",{className:"pedido",children:[Object(_.jsx)(W,{}),Object(_.jsx)(G,{})]})]})]})]})})),q=function(){return Object(_.jsx)(C,{children:Object(_.jsx)(i.d,{children:Object(_.jsx)(i.b,{path:"/pos/terminal",children:Object(_.jsx)(Z,{})})})})},Y=a(373),K=a(371),Q=a(370),X=a(368),$=function(){var e=Object(c.useContext)(g).cerrarSesion;return Object(_.jsxs)(Y.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(_.jsxs)(r.c,{to:"/admin",className:"nav-brand",children:[Object(_.jsx)("span",{className:"text-white",children:"POS"}),Object(_.jsx)("span",{className:"text-danger",children:"CodiGo"})]}),Object(_.jsx)(Y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(_.jsxs)(Y.a.Collapse,{id:"basic-navbar-nav",children:[Object(_.jsxs)(K.a,{className:"mr-auto",children:[Object(_.jsx)(r.c,{to:"/admin",className:"nav-link",activeClassName:"active",exact:!0,children:"Dashboard"}),Object(_.jsx)(r.c,{to:"/admin/mesa",className:"nav-link",activeClassName:"active",exact:!0,children:"Mesas"}),Object(_.jsx)(r.c,{to:"/admin/plato",className:"nav-link",activeClassName:"active",exact:!0,children:"Platos"}),Object(_.jsx)(r.c,{to:"/admin/pedido",className:"nav-link",activeClassName:"active",exact:!0,children:"Pedidos"})]}),Object(_.jsx)(Q.a,{inline:!0,children:Object(_.jsx)(X.a,{variant:"outline-danger",onClick:e,children:"Cerrar Sesi\xf3n"})})]})]})},ee=a(111),te=a(172),ae=a.n(te),ce=function(){var e=Object(c.useState)(0),t=Object(u.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(0),r=Object(u.a)(n,2),i=r[0],o=r[1],l=Object(c.useState)(0),d=Object(u.a)(l,2),j=d[0],b=d[1],m=Object(c.useState)(0),h=Object(u.a)(m,2),O=h[0],x=h[1],f=Object(c.useState)({labels:[],valores:[]}),v=Object(u.a)(f,2),N=v[0],g=v[1],C={labels:["Mesas","Pedidos","Categor\xedas"],datasets:[{label:"# of Votes",data:[a,i,j],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)"],borderWidth:1}]},y={labels:N.labels,datasets:[{label:"# of Votes",data:N.valores,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)"],borderWidth:1}]};return Object(c.useEffect)((function(){var e=ae()(p);return e.on("reporte-dashboard",(function(e){var t=JSON.parse(e);console.log(t);var a=t.pedidosCompletos.slice(-10),c=a.map((function(e){return e.pedido_fech.split(" ")[0]})),n=a.map((function(e){return e.PedidoPlatos.reduce((function(e,t){var a;return e+ +t.pedidoplato_cant*(+(null===(a=t.Plato)||void 0===a?void 0:a.plato_pre)||0)}),0)}));g({labels:c,valores:n}),s(t.totales.mesas),o(t.totales.pedidos),b(t.totales.categorias),x(t.total_caja.totalMoney)})),e.emit("peticion-reporte-dashboard"),function(){e.disconnect()}}),[]),Object(_.jsxs)("main",{className:"container-fluid bg-light pt-5",style:{minHeight:"calc(100vh - 56px)"},children:[Object(_.jsx)("div",{className:"row pt-4",children:Object(_.jsx)("div",{className:"col",children:Object(_.jsx)("h1",{className:"display-3 text-center",children:"Dashboard Administrativo"})})}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-8",children:Object(_.jsxs)("div",{className:"row mt-4",children:[Object(_.jsx)("div",{className:"col-md-4 mb-3",children:Object(_.jsxs)("div",{className:"card shadow bg-dark text-white",children:[Object(_.jsx)("div",{className:"card-header",children:Object(_.jsx)("h5",{className:"card-title",children:"Total de Mesas"})}),Object(_.jsx)("div",{className:"card-body text-center",children:Object(_.jsx)("span",{className:"display-4",children:a})})]})}),Object(_.jsx)("div",{className:"col-md-4 mb-3",children:Object(_.jsxs)("div",{className:"card shadow bg-success text-white",children:[Object(_.jsx)("div",{className:"card-header",children:Object(_.jsx)("h5",{className:"card-title",children:"Total de Pedidos"})}),Object(_.jsx)("div",{className:"card-body text-center",children:Object(_.jsx)("span",{className:"display-4",children:i})})]})}),Object(_.jsx)("div",{className:"col-md-4 mb-3",children:Object(_.jsxs)("div",{className:"card shadow bg-info text-white",children:[Object(_.jsx)("div",{className:"card-header",children:Object(_.jsx)("h5",{className:"card-title",children:"Total de Categorias"})}),Object(_.jsx)("div",{className:"card-body text-center",children:Object(_.jsx)("span",{className:"display-4",children:j})})]})}),Object(_.jsx)("div",{className:"col-md-6 mb-3",children:Object(_.jsxs)("div",{className:"card shadow ",children:[Object(_.jsx)("div",{className:"card-header",children:Object(_.jsx)("h5",{className:"card-title",children:"Total Ingresos"})}),Object(_.jsx)("div",{className:"card-body text-center",children:Object(_.jsxs)("p",{className:"display-1",children:["S/ ",Object(_.jsx)("span",{children:O.toFixed(2)})]})})]})}),Object(_.jsx)("div",{className:"col-md-6 mb-3",children:Object(_.jsxs)("div",{className:"card shadow bg-dark text-white",children:[Object(_.jsx)("div",{className:"card-header",children:Object(_.jsx)("h5",{className:"card-title",children:"Pedidos"})}),Object(_.jsx)("div",{className:"card-body text-center",children:Object(_.jsx)(ee.b,{data:y,height:250})})]})})]})}),Object(_.jsx)("div",{className:"col-md-4",children:Object(_.jsx)("div",{className:"row mt-4",children:Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsxs)("div",{className:"card bg-dark text-white shadow ",children:[Object(_.jsx)("div",{className:"card-header",children:Object(_.jsx)("h5",{className:"card-title",children:"Total Ingresos"})}),Object(_.jsx)("div",{className:"card-body text-center",children:Object(_.jsx)(ee.a,{data:C})})]})})})})]})]})},se=a(55),ne=function(e){var t=e.mostrarModalEditar,a=e.setMostrarModalEditar,s=e.objMesaEditar,n=e.traerMesas,r=Object(c.useState)(s),i=Object(u.a)(r,2),o=i[0],l=i[1],d=function(e){l(Object(j.a)(Object(j.a)({},o),{},Object(k.a)({},e.target.name,e.target.value)))};Object(c.useEffect)((function(){l(Object(j.a)({},s))}),[s]);return Object(_.jsxs)(M.a,{show:t,onHide:function(){a(!1)},size:"xl",children:[Object(_.jsx)(M.a.Header,{closeButton:!0,children:Object(_.jsx)(M.a.Title,{children:"Editar Mesa"})}),Object(_.jsx)(M.a.Body,{children:o?Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),B(o).then((function(e){e.data.ok&&(alert("Mesa editada correctamente"),a(!1),n())}))},children:[Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Id:"}),Object(_.jsx)("input",{type:"text",className:"form-control",value:o.mesa_id,disabled:!0})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Nro Mesa:"}),Object(_.jsx)("input",{type:"text",className:"form-control",value:o.mesa_nro,name:"mesa_nro",onChange:d})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Capacidad:"}),Object(_.jsx)("input",{type:"number",className:"form-control",value:o.mesa_cap,name:"mesa_cap",onChange:d})]}),Object(_.jsx)("div",{className:"form-group",children:Object(_.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Guardar Cambios"})})]}):null})]})},re={mesa_cap:"",mesa_nro:0},ie=function(e){var t=e.mostrarModalCrear,a=e.setMostrarModalCrear,s=e.traerMesas,n=Object(c.useState)(Object(j.a)({},re)),r=Object(u.a)(n,2),i=r[0],o=r[1],l=function(e){o(Object(j.a)(Object(j.a)({},i),{},Object(k.a)({},e.target.name,e.target.value)))};return Object(_.jsxs)(M.a,{show:t,onHide:function(){a(!1)},size:"xl",children:[Object(_.jsx)(M.a.Header,{closeButton:!0,children:Object(_.jsx)(M.a.Title,{children:"Crear Mesa"})}),Object(_.jsx)(M.a.Body,{children:Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),J(i).then((function(e){e.data.ok&&(a(!1),o(re),s())}))},children:[Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Nro Mesa:"}),Object(_.jsx)("input",{type:"text",className:"form-control",value:i.mesa_nro,name:"mesa_nro",onChange:l})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Capacidad:"}),Object(_.jsx)("input",{type:"number",className:"form-control",value:i.mesa_cap,name:"mesa_cap",onChange:l})]}),Object(_.jsx)("div",{className:"form-group",children:Object(_.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Crea Mesa"})})]})})]})},oe=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(!1),r=Object(u.a)(n,2),i=r[0],o=r[1],l=Object(c.useState)(!0),d=Object(u.a)(l,2),b=d[0],m=d[1],h=Object(c.useState)({columns:[{label:"#",field:"posicion"},{label:"Id",field:"mesa_id"},{label:"Nro Mesa",field:"mesa_nro"},{label:"Capacidad",field:"mesa_cap"},{label:"Acciones",field:"acciones"}],rows:[]}),O=Object(u.a)(h,2),x=O[0],p=O[1],f=Object(c.useState)(null),v=Object(u.a)(f,2),N=v[0],g=v[1],C=Object(c.useState)(!0),y=Object(u.a)(C,2),S=y[0],k=y[1],M=function(e){w.a.fire({title:"\xbfSeguro que deseas eliminar la mesa?",text:"Los cambios ser\xe1n irreversibles",showCancelButton:!0,icon:"error"}).then((function(t){t.isConfirmed&&L(e).then((function(e){e.data.ok&&(w.a.fire({text:"Mesa eliminada correctamente",icon:"success",timer:1500}),F())}))}))},F=function(){m(!0),T().then((function(e){if(e.data.ok){var t=e.data.content.map((function(e,t){return Object(j.a)(Object(j.a)({},e),{},{mesa_cap:e.mesa_cap+" personas",posicion:t+1,acciones:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("button",{className:"btn btn-warning",onClick:function(){g(Object(j.a)({},e)),s(!0)},children:"Editar"}),Object(_.jsx)("button",{className:"btn btn-danger",onClick:function(){M(e.mesa_id)},children:"Eliminar"})]})})}));S&&(p(Object(j.a)(Object(j.a)({},x),{},{rows:t})),m(!1))}}))};return Object(c.useEffect)((function(){return F(),function(){k(!1)}}),[]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("main",{className:"container-fluid pt-5 bg-light ",style:{minHeight:"calc(100vh - 56px)"},children:[Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col",children:Object(_.jsx)("h1",{className:"display-4",children:"Lista de Mesas"})})}),Object(_.jsx)("hr",{}),Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col",children:Object(_.jsx)("div",{className:"card shadow",children:Object(_.jsxs)("div",{className:"card-body",children:[Object(_.jsx)("button",{className:"btn btn-primary",onClick:function(){o(!0)},children:"Crear Mesa"}),Object(_.jsx)("hr",{}),b?Object(_.jsx)("div",{className:"alert alert-info",children:"Cargando"}):Object(_.jsx)(se.c,{data:x})]})})})})]}),Object(_.jsx)(ne,{mostrarModalEditar:a,setMostrarModalEditar:s,objMesaEditar:N,traerMesas:F}),Object(_.jsx)(ie,{mostrarModalCrear:i,setMostrarModalCrear:o,traerMesas:F})]})},le=function(){var e=Object(c.useState)(!0),t=Object(u.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)({columns:[{label:"#",field:"posicion"},{label:"Id",field:"pedido_id"},{label:"Fecha",field:"pedido_fech"},{label:"Codigo",field:"pedido_nro"},{label:"Estado",field:"pedido_est"},{label:"Nro Mesa",field:"mesa_nro"},{label:"Usuario",field:"usu_nombre"}],rows:[]}),r=Object(u.a)(n,2),i=r[0],o=r[1];return Object(c.useEffect)((function(){v().then((function(e){if(e.data.ok){var t=e.data.pedidos.map((function(e,t){var a,c,s;return Object(j.a)(Object(j.a)({},e),{},{posicion:t+1,mesa_nro:(null===(a=e.Mesa)||void 0===a?void 0:a.mesa_nro)||"s/n",usu_nombre:((null===(c=e.Usuario)||void 0===c?void 0:c.usu_nom)||"")+" "+((null===(s=e.Usuario)||void 0===s?void 0:s.usu_ape)||"")})}));o(Object(j.a)(Object(j.a)({},i),{},{rows:Object(b.a)(t)})),s(!1)}}))}),[]),Object(_.jsxs)("main",{className:"container-fluid pt-5 bg-light",style:{minHeight:"calc(100vh - 56px)"},children:[Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col",children:Object(_.jsx)("h1",{className:"display-4",children:"Lista de Pedidos"})})}),Object(_.jsx)("hr",{}),Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col",children:Object(_.jsx)("div",{className:"card shadow",children:Object(_.jsx)("div",{className:"card-body",children:a?Object(_.jsx)("div",{className:"alert alert-info",children:Object(_.jsx)("h4",{children:"CARGANDO..."})}):Object(_.jsx)(se.c,{data:i})})})})})]})},de=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("".concat(p,"/plato"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("".concat(p,"/plato"),JSON.stringify(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(d.a)(l.a.mark((function e(t,a){var c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FormData).append("imagen",t),c.append("plato_id",a),e.next=5,x.a.post("".concat(p,"/plato/imagen/upload"),c,{headers:{"Content-type":"multipart/form-data"}});case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ue=function(){return Object(_.jsxs)("div",{className:"global-loading text-white",style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100vw",minHeight:"100vh",zIndex:"1000",position:"absolute",left:"0",top:"0",backgroundColor:"rgba(0,0,0,0.7)"},children:[Object(_.jsx)("i",{class:"fas fa-spinner   fa-spin fa-3x "}),Object(_.jsx)("p",{className:"display-4 mt-3",children:"CARGANDO..."})]})},me=Object(i.g)((function(e){var t=e.history,a=Object(c.useState)({plato_nom:"",plato_img:"",plato_pre:0,categoria_id:0}),s=Object(u.a)(a,2),n=s[0],r=s[1],i=Object(c.useState)([]),o=Object(u.a)(i,2),l=o[0],d=o[1],b=Object(c.useState)(!1),m=Object(u.a)(b,2),h=m[0],O=m[1],x=Object(c.useRef)();Object(c.useEffect)((function(){A().then((function(e){e.data.ok&&d(e.data.content)}))}),[]);var p=function(e){r(Object(j.a)(Object(j.a)({},n),{},Object(k.a)({},e.target.name,e.target.value)))};return Object(_.jsxs)(_.Fragment,{children:[h&&Object(_.jsx)(ue,{}),Object(_.jsx)("main",{className:"container mt-5",children:Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col",children:Object(_.jsxs)("div",{className:"card shadow",children:[Object(_.jsx)("div",{className:"card-header",children:Object(_.jsx)("h4",{children:"Formulario de Creaci\xf3n de un Plato"})}),Object(_.jsx)("div",{className:"card-body",children:Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O(!0),je(n).then((function(e){e.data.ok&&be(x.current.files[0],e.data.content.plato_id).then((function(e){console.log(e),O(!1),t.push("/admin/plato")})).catch((function(e){w.a.fire({icon:"error",title:"Ups!",text:"Hubo un error al subir la imagen a nuestros servidores",timer:3e3}),O(!1),t.push("/admin/plato")}))})).catch((function(e){w.a.fire({icon:"error",title:"Ups!",text:"Hubo un error al subir la imagen a nuestros servidores",timer:3e3}),O(!1),t.push("/admin/plato")}))},children:[Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Nombre:"}),Object(_.jsx)("input",{type:"text",className:"form-control",value:n.plato_nom,name:"plato_nom",onChange:p})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Precio:"}),Object(_.jsx)("input",{type:"number",className:"form-control",value:n.plato_pre,name:"plato_pre",onChange:p})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Categoria"}),Object(_.jsxs)("select",{className:"form-control",value:n.categoria_id,name:"categoria_id",onChange:p,children:[Object(_.jsx)("option",{value:"0",children:"Seleccione"}),l.map((function(e,t){return Object(_.jsx)("option",{value:e.categoria_id,children:e.categoria_nom},t)}))]})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Imagen"}),Object(_.jsx)("input",{type:"file",ref:x,accept:"image/*"})]}),Object(_.jsx)("div",{className:"form-group",children:Object(_.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Crear Plato"})})]})})]})})})})]})})),he={columns:[{label:"#",field:"posicion"},{label:"Id",field:"plato_id"},{label:"Nombre",field:"plato_nom"},{label:"Imagen",field:"plato_img"},{label:"Precio",field:"plato_pre"},{label:"Categoria",field:"categoria_nom"}],rows:[]},Oe=function(){var e=Object(c.useState)(!0),t=Object(u.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(he),i=Object(u.a)(n,2),o=i[0],l=i[1];return Object(c.useEffect)((function(){var e=!0;return de().then((function(t){t.data.ok&&e&&(l(Object(j.a)(Object(j.a)({},he),{},{rows:t.data.content.map((function(e,t){var a;return{posicion:t+1,plato_id:e.plato_id,plato_nom:e.plato_nom,plato_img:Object(_.jsx)("img",{src:e.plato_img,width:"100",alt:e.plato_nom}),plato_pre:"S/ ".concat((+e.plato_pre).toFixed(2)),categoria_nom:(null===(a=e.Categorium)||void 0===a?void 0:a.categoria_nom)||"Sin categoria"}}))})),s(!1))})),function(){e=!1}}),[]),Object(_.jsxs)("main",{className:"container-fluid pt-5 bg-light",style:{minHeight:"calc(100vh - 56px)"},children:[Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col",children:Object(_.jsx)("h1",{className:"display-4",children:"Lista de Platos"})})}),Object(_.jsx)("hr",{}),Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col",children:Object(_.jsx)("div",{className:"card shadow",children:Object(_.jsxs)("div",{className:"card-body",children:[Object(_.jsx)(r.b,{className:"btn btn-primary",to:"/admin/plato/crear",children:"Crear Plato"}),Object(_.jsx)("hr",{}),a?Object(_.jsx)("div",{className:"alert alert-info",children:"Cargando"}):Object(_.jsx)(se.c,{data:o,bordered:!0,hover:!0,striped:!0})]})})})})]})},xe=function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)($,{}),Object(_.jsxs)(i.d,{children:[Object(_.jsx)(i.b,{path:"/admin/mesa",children:Object(_.jsx)(oe,{})}),Object(_.jsx)(i.b,{path:"/admin/plato/crear",children:Object(_.jsx)(me,{})}),Object(_.jsx)(i.b,{path:"/admin/plato",children:Object(_.jsx)(Oe,{})}),Object(_.jsx)(i.b,{path:"/admin/pedido",children:Object(_.jsx)(le,{})}),Object(_.jsx)(i.b,{path:"/admin",exact:!0,children:Object(_.jsx)(ce,{})})]})]})},pe=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("".concat(p,"/login"),JSON.stringify(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("".concat(p,"/verificar"),null,{headers:{Authorization:"Bearer ".concat(t)}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=Object(i.g)((function(e){var t=e.history,a=Object(c.useState)({correo:"",password:""}),s=Object(u.a)(a,2),n=s[0],r=s[1],i=Object(c.useContext)(g).iniciarSesionContext,o=Object(c.useState)(!1),l=Object(u.a)(o,2),d=l[0],b=l[1],m=function(e){r(Object(j.a)(Object(j.a)({},n),{},Object(k.a)({},e.target.name,e.target.value)))};return Object(_.jsxs)(_.Fragment,{children:[d&&Object(_.jsx)(ue,{}),Object(_.jsx)("main",{className:"login",children:Object(_.jsxs)("div",{className:"login__form",children:[Object(_.jsx)("h1",{children:"Inicio de Sesi\xf3n"}),Object(_.jsxs)("form",{className:"formulario",onSubmit:function(e){e.preventDefault(),b(!0),pe(n).then((function(e){if(e.data.ok){i(e.data.token);var a=e.data.token.split(".")[1],c=atob(a),s=JSON.parse(c);b(!1),"admin"===s.usu_tipo?t.push("/admin"):t.push("/pos/terminal")}}))},children:[Object(_.jsx)("label",{htmlFor:"",children:"Email:"}),Object(_.jsx)("input",{name:"correo",onChange:m,value:n.correo,type:"email",className:"formulario__input",placeholder:"Email"}),Object(_.jsx)("label",{htmlFor:"",children:"Password:"}),Object(_.jsx)("input",{name:"password",onChange:m,value:n.password,type:"password",className:"formulario__input",placeholder:"Password"}),Object(_.jsx)("button",{className:"formulario__submit",type:"submit",children:"Iniciar Sesi\xf3n"})]})]})})]})})),Ne=function(){return Object(_.jsx)(i.d,{children:Object(_.jsx)(i.b,{path:"/auth/login",children:Object(_.jsx)(ve,{})})})},ge=function(e,t){return"INICIAR_SESION"===t.action?Object(j.a)({},t.data):"CERRAR_SESION"===t.action?(localStorage.removeItem("token"),{autenticado:!1,cargando:!1,usu_nom:null,token:null,usu_id:null,usu_tipo:null}):void 0},_e={autenticado:!1,cargando:!0,token:null,usu_nom:null,usu_id:null,usu_tipo:null},Ce=Object(i.g)((function(e){var t=Object(c.useReducer)(ge,_e),a=Object(u.a)(t,2),s=a[0],n=a[1],r=function(e){localStorage.setItem("token",e);var t=e.split(".")[1],a=atob(t),c=JSON.parse(a);n({action:"INICIAR_SESION",data:{autenticado:!0,cargando:!1,token:e,usu_nom:c.usu_nom,usu_id:c.usu_id,usu_tipo:c.usu_tipo}})};Object(c.useEffect)((function(){!function(){var e=localStorage.getItem("token");e?fe(e).then((function(t){t.data.ok&&r(e)})).catch((function(e){console.log(e),i()})):i()}()}),[]);var i=function(){n({action:"CERRAR_SESION"})};return Object(_.jsx)(g.Provider,{value:Object(j.a)({iniciarSesionContext:r,cerrarSesion:i},s),children:e.children})})),ye=function(e){var t=Object(c.useContext)(g),a=t.autenticado,s=t.cargando,n=t.usu_tipo;return s?Object(_.jsx)(ue,{}):a&&("admin"===n&&e.path.startsWith("/admin")||"ventas"===n&&e.path.startsWith("/pos"))?Object(_.jsx)(i.b,{path:e.path,children:e.children}):Object(_.jsx)(i.a,{to:"/"})},we=function(){return Object(_.jsx)("main",{className:"container-fluid",children:Object(_.jsxs)("div",{className:"row bg-dark justify-content-center align-items-center bg-home",style:{minHeight:"100vh"},children:[Object(_.jsx)("div",{className:"col-12",children:Object(_.jsxs)("h1",{className:"display-3 text-light text-center",children:["Sistema de Punto de Venta Codi",Object(_.jsx)("span",{className:"text-white",children:"Go"})]})}),Object(_.jsx)("div",{className:"col-md-6 col-lg-6 col-xl-3 ",children:Object(_.jsx)(r.b,{to:"/admin",children:Object(_.jsx)("div",{className:"card py-5 shadow bg-warning text-white",children:Object(_.jsx)("div",{className:"card-body",children:Object(_.jsx)("h4",{className:"display-4",children:"Admin"})})})})}),Object(_.jsx)("div",{className:"col-md-6 col-lg-6 col-xl-3 ",children:Object(_.jsx)(r.b,{to:"/pos/terminal",children:Object(_.jsx)("div",{className:"card py-5 shadow bg-info text-white",children:Object(_.jsx)("div",{className:"card-body",children:Object(_.jsx)("h4",{className:"display-4",children:"POS"})})})})}),Object(_.jsx)("div",{className:"col-md-6 col-lg-6 col-xl-3 ",children:Object(_.jsx)(r.b,{to:"/auth/login",children:Object(_.jsx)("div",{className:"card py-5 shadow bg-danger text-white",children:Object(_.jsx)("div",{className:"card-body",children:Object(_.jsx)("h4",{className:"display-4",children:"Login"})})})})})]})})},Se=function(){return Object(_.jsx)(i.d,{children:Object(_.jsx)(i.b,{path:"/",children:Object(_.jsx)(we,{})})})},ke=function(){return Object(_.jsx)(r.a,{children:Object(_.jsx)(Ce,{children:Object(_.jsxs)(i.d,{children:[Object(_.jsx)(ye,{path:"/pos",children:Object(_.jsx)(q,{})}),Object(_.jsx)(ye,{path:"/admin",children:Object(_.jsx)(xe,{})}),Object(_.jsx)(i.b,{path:"/auth",children:Object(_.jsx)(Ne,{})}),Object(_.jsx)(i.b,{path:"/",exact:!0,children:Object(_.jsx)(Se,{})})]})})})};n.a.render(Object(_.jsx)(ke,{}),document.getElementById("root"))}},[[363,1,2]]]);
//# sourceMappingURL=main.e5f59915.chunk.js.map